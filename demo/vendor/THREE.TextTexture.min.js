(function(a){a.TextTexture=class extends a.Texture{constructor({text:text="",fontSize:fontSize=16,fontFamily:fontFamily="sans-serif",lineHeight:lineHeight=1.5,magFilter:magFilter=a.LinearFilter,minFilter:minFilter=a.LinearFilter,mapping:mapping,wrapS:wrapS,wrapT:wrapT,format:format,type:type,anisotropy:anisotropy}={}){super(document.createElement("canvas"),mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this._text=text,this._fontSize=fontSize,this._fontFamily=fontFamily,this._lineHeight=lineHeight,this._redrawCanvas()}_redrawCanvas(){this.blank=function(a){if(a.clearRect(0,0,this.image.width,this.image.height),this._text&&this._fontSize&&this._lineHeight){let b=`${this._fontSize}px ${this._fontFamily}`;a.font=b;let c=a.measureText(this._text).width;if(c)return this.image.width=c,this.image.height=this._fontSize*this._lineHeight,a.font=b,a.textAlign="center",a.textBaseline="middle",a.fillStyle="white",a.fillText(this._text,this.image.width/2,this.image.height/2),!1}return this.image.width=this.image.height=1,!0}.call(this,this.image.getContext("2d")),this.needsUpdate=!0}get text(){return this._text}set text(a){this._text!==a&&(this._text=a,this._redrawCanvas())}get fontSize(){return this._fontSize}set fontSize(a){this._fontSize!==a&&(this._fontSize=a,this._redrawCanvas())}get fontFamily(){return this._fontFamily}set fontFamily(a){this._fontFamily!==a&&(this._fontFamily=a,this._redrawCanvas())}get lineHeight(){return this._lineHeight}set lineHeight(a){this._lineHeight!==a&&(this._lineHeight=a,this._redrawCanvas())}get aspect(){return this.image.width&&this.image.height?this.image.width/this.image.height:1}}}).call(this,THREE);